<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>正则校验</title>
</head>
<body>
	<form class="form">
		<div class="form-group">
			<label for="firstname">firstname</label>
			<input type="text" id="firstname">
		</div>
		<div class="form-group">
			<label for="lastname">lastname</label>
			<input type="text" id="lastname">
		</div>
		<div class="form-group">
			<label for="phone">phone</label>
			<input type="tel" id="phone" maxlength="11">
		</div>
		<div class="form-group">
			<label for="code">code</label>
			<input type="text" id="code">
		</div>
		<div class="form-group">
			<button type="button" id="add-email">新增表单</button>
			<label for="email">email</label>
			<input type="text" id="email" class="email">
		</div>

		<button type="button" id="submit">提交</button>
	</form>

<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script>
    $(function(){
    	$('#submit').click(function(){
    		let isText = /^[a-zA-Z][a-zA-Z0-9]$/;
    		let isPhone = /^1[3|4|5|6|7|8]\d{9}$/;
    		let isCode = /^\d{4}$/;
    		let isEmail = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;

    		let $firstname = $('#firstname').val(),
    			$lastname = $('#lastname').val(),
    			$phone = $('#phone').val(),
    			$code = $('#code').val(),
    			$email = $('#email').val();

    		if(!isText.test($firstname)){
    			alert('firstname error');
    			return false;
    		}
    		if(!isText.test($lastname)){
    			alert('lastname error');
    			return false;
    		}
    		if(!isPhone.test($phone)){
    			alert('phone error');
    			return false;
    		}
    		if(!isCode.test($code)){
    			alert('code error');
    			return false;
    		}
            if(!isEmail.test($email)){
                alert('email error');
                return false;
            }

    		var emailArr = [];
    		var emailObj = $('.email');
    		for(let i=0;i<emailObj.length;i++){
                emailArr.push(emailObj.eq(i).val());
            }

    		$.ajax({
                url:'',
                type:'post',
                data:{

                },
                success:function (res) {

                },
                error:function () {
                    alert('net error');
                }
            });
    	});

    	$('#add-email').click(function(){
    		let $this = $(this);
    		var str = '<input type="text" class="email">';
    		$this.parent().append(str);
    	});
    })
</script>
</body>
</html>
